{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Multi-Agent Enhancement Schema",
  "description": "Structured format for AI agent enhancements to mcp-devkit documents",
  "type": "object",
  "properties": {
    "agent": {
      "type": "string",
      "enum": ["claude", "gpt4", "gemini"],
      "description": "Which AI agent provided this enhancement"
    },
    "round": {
      "type": "integer",
      "minimum": 1,
      "maximum": 5,
      "description": "Enhancement round number"
    },
    "document_type": {
      "type": "string",
      "enum": ["prd", "architecture", "tasklist"],
      "description": "Type of document being enhanced"
    },
    "enhancements": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "section": {
            "type": "string",
            "description": "Document section to modify (e.g., 'Core Requirements > Must Have')"
          },
          "action": {
            "type": "string",
            "enum": ["add", "modify", "enhance", "replace"],
            "description": "Type of modification"
          },
          "location": {
            "type": "string",
            "description": "Specific location within section (e.g., 'after bullet 3', 'new subsection')"
          },
          "content": {
            "type": "string",
            "description": "Content to add/modify"
          },
          "rationale": {
            "type": "string",
            "description": "Why this enhancement is needed"
          }
        },
        "required": ["section", "action", "content", "rationale"]
      }
    },
    "new_sections": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "title": {
            "type": "string",
            "description": "Section title"
          },
          "location": {
            "type": "string",
            "description": "Where to insert (e.g., 'after Technical Considerations')"
          },
          "content": {
            "type": "string",
            "description": "Full section content in markdown"
          },
          "rationale": {
            "type": "string",
            "description": "Why this new section is needed"
          }
        },
        "required": ["title", "location", "content", "rationale"]
      }
    },
    "metrics_updates": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "metric_name": {
            "type": "string",
            "description": "Name of the metric to add/modify"
          },
          "category": {
            "type": "string",
            "description": "Metric category (User, Business, Technical)"
          },
          "target": {
            "type": "string",
            "description": "Target value"
          },
          "measurement_method": {
            "type": "string",
            "description": "How to measure this metric"
          },
          "rationale": {
            "type": "string",
            "description": "Why this metric is important"
          }
        },
        "required": ["metric_name", "category", "target", "measurement_method", "rationale"]
      }
    },
    "risks_identified": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "risk_name": {
            "type": "string",
            "description": "Name of the risk"
          },
          "impact": {
            "type": "string",
            "enum": ["Low", "Medium", "High", "Critical"],
            "description": "Risk impact level"
          },
          "probability": {
            "type": "string",
            "enum": ["Low", "Medium", "High"],
            "description": "Risk probability"
          },
          "mitigation": {
            "type": "string",
            "description": "Mitigation strategy"
          },
          "rationale": {
            "type": "string",
            "description": "Why this is a risk"
          }
        },
        "required": ["risk_name", "impact", "probability", "mitigation", "rationale"]
      }
    },
    "summary": {
      "type": "object",
      "properties": {
        "key_improvements": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of major improvements made"
        },
        "technical_additions": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Technical details added"
        },
        "concerns_for_next_agent": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Areas that need attention from the next agent"
        }
      },
      "required": ["key_improvements"]
    }
  },
  "required": ["agent", "round", "document_type", "summary"]
}